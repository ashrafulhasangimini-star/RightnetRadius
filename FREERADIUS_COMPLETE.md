# тЬЕ FreeRADIUS ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи - рж╕ржорзНржкрзВрж░рзНржг рждрж╛рж▓рж┐ржХрж╛

## ЁЯУж ржпрж╛ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ

### 1. **ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░ (Controller)**
тЬЕ `app/Http/Controllers/FreeRadiusController.php` (350+ рж▓рж╛ржЗржи)
   - RADIUS рж╕рж╛рж░рзНржнрж╛рж░ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
   - NAS ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржкрж░рж┐ржЪрж╛рж▓ржирж╛
   - ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржЯрзЗрж╕рзНржЯрж┐ржВ
   - ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржлрж╛ржВрж╢ржирж╛рж▓рж┐ржЯрж┐
   - рж╣рзЗрж▓рже ржЪрзЗржХ ржПржмржВ ржбрж╛ржпрж╝рж╛ржЧржирж╕рзНржЯрж┐ржХрзНрж╕

### 2. **рж░рж╛ржЙржЯрж╕ (API Endpoints)**
тЬЕ `routes/api.php` - 13ржЯрж┐ ржирждрзБржи ржПржирзНржбржкржпрж╝рзЗржирзНржЯ ржпрзБржХрзНржд:
   - `/freeradius/config` - ржХржиржлрж┐ржЧ ржкрж░рж┐ржЪрж╛рж▓ржирж╛
   - `/freeradius/status` - рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕
   - `/freeradius/nas-clients` - NAS ржкрж░рж┐ржЪрж╛рж▓ржирж╛ (CRUD)
   - `/freeradius/users` - RADIUS ржЗржЙржЬрж╛рж░
   - `/freeradius/export/*` - ржбрзЗржЯрж╛ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ
   - `/freeradius/test-auth` - ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржЯрзЗрж╕рзНржЯ
   - `/freeradius/accounting-logs` - ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрж┐ржВ рж▓ржЧ
   - `/freeradius/diagnostics` - рж╕рж┐рж╕рзНржЯрзЗржо ржбрж╛ржпрж╝рж╛ржЧржирж╕рзНржЯрж┐ржХрзНрж╕

### 3. **ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓**
тЬЕ `config/freeradius.php` (100+ рж▓рж╛ржЗржи)
   - рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЯрж┐ржВрж╕
   - рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржХржиржлрж┐ржЧ
   - ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржкржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи
   - ржбрж╛ржЯрж╛ржмрзЗрж╕ ржорзНржпрж╛ржкрж┐ржВ
   - RADIUS ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХржиржлрж┐ржЧ

### 4. **ржбрж╛ржЯрж╛ржмрзЗрж╕ ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи**
тЬЕ `database/migrations/2024_01_20_create_freeradius_tables.php`
   - `nas_clients` - NAS ржбрж┐ржнрж╛ржЗрж╕ (RouterOS, WiFi AP, etc.)
   - `radius_accounting` - рж╕рзЗрж╢ржи ржПржмржВ ржмрзНржпрж╛ржирзНржбржЙржЗрже рж▓ржЧ
   - `radius_users` - ржЗржЙржЬрж╛рж░ ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓
   - `radius_groups` - ржЗржЙржЬрж╛рж░ ржЧрзНрж░рзБржк ржкрж░рж┐ржЪрж╛рж▓ржирж╛
   - `radius_group_members` - ржЧрзНрж░рзБржк ржорзЗржорзНржмрж╛рж░рж╢рж┐ржк
   - `radius_config_history` - ржХржиржлрж┐ржЧ ржкрж░рж┐ржмрж░рзНрждржи рж▓ржЧ
   - `radius_health_checks` - рж╕рж╛рж░рзНржнрж╛рж░ ржоржирж┐ржЯрж░рж┐ржВ

### 5. **рж╕рж┐ржбрж╛рж░ (ржбрзЗржЯрж╛ ржкрзВрж░рзНржгрждрж╛)**
тЬЕ `database/seeders/FreeRadiusSeeder.php`
   - 4ржЯрж┐ ржЙржжрж╛рж╣рж░ржг NAS ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ
   - 5ржЯрж┐ RADIUS ржЗржЙржЬрж╛рж░
   - 4ржЯрж┐ RADIUS ржЧрзНрж░рзБржк
   - рж╕рж╛ржорзНржкрж▓ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрж┐ржВ рж▓ржЧ
   - ржХржиржлрж┐ржЧ рж╣рж┐рж╕рзНржЯрзЛрж░рж┐ ржПржмржВ рж╣рзЗрж▓рже ржЪрзЗржХ рж░рзЗржХрж░рзНржб

### 6. **ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи**
тЬЕ `FREERADIUS_SETUP.md` - ржкрзНрж░рж╛ржержорж┐ржХ рж╕рзЗржЯржЖржк ржЧрж╛ржЗржб
тЬЕ `FREERADIUS_CONFIG.md` - FreeRADIUS ржХржиржлрж┐ржЧ ржлрж╛ржЗрж▓ (radiusd.conf, clients.conf, users)
тЬЕ `FREERADIUS_INTEGRATION_GUIDE.md` - рж╕ржорзНржкрзВрж░рзНржг ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи ржЧрж╛ржЗржб (RouterOS рж╕рж╣)
тЬЕ `FREERADIUS_ENV_TEMPLATE.txt` - .env ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржЯрзЗржоржкрзНрж▓рзЗржЯ

---

## ЁЯЪА ржжрзНрж░рзБржд рж╢рзБрж░рзБ ржХрж░рзБржи

### ржзрж╛ржк 1: ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи ржЪрж╛рж▓рж╛ржи
```bash
cd c:\Users\Rajibul Hasan\Documents\GitHub\RightnetRadius
php artisan migrate
```

### ржзрж╛ржк 2: ржбрзЗржЯрж╛ рж╕рж┐ржб ржХрж░рзБржи
```bash
php artisan db:seed --class=FreeRadiusSeeder
```

### ржзрж╛ржк 3: FreeRADIUS рж╕рж╛рж░рзНржнрж╛рж░ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи
```bash
# Windows
choco install freeradius-server -y

# Linux
sudo apt-get install freeradius freeradius-mysql -y
```

### ржзрж╛ржк 4: ржХржиржлрж┐ржЧ ржлрж╛ржЗрж▓ ржХржкрж┐ ржХрж░рзБржи
- `FREERADIUS_CONFIG.md` ржП ржжрзЗржЦрж╛ржирзЛ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ FreeRADIUS ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржХржкрж┐ ржХрж░рзБржи

### ржзрж╛ржк 5: рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рзБржи
```bash
# Windows
cd "C:\Program Files\FreeRADIUS\bin"
radiusd.exe -X

# Linux
sudo systemctl start freeradius
```

### ржзрж╛ржк 6: ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи
```bash
# ржУржпрж╝рзЗржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ ржЪрзЗржХ ржХрж░рзБржи
curl http://localhost:8000/api/freeradius/status
```

---

## ЁЯУЛ API рж░рзЗржлрж╛рж░рзЗржирзНрж╕

### ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи
```
GET  /api/freeradius/config
PUT  /api/freeradius/config
```

### рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕
```
GET /api/freeradius/status
GET /api/freeradius/diagnostics
```

### NAS ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржкрж░рж┐ржЪрж╛рж▓ржирж╛
```
GET    /api/freeradius/nas-clients
POST   /api/freeradius/nas-clients
PUT    /api/freeradius/nas-clients/{id}
DELETE /api/freeradius/nas-clients/{id}
```

### ржбрзЗржЯрж╛ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ
```
GET /api/freeradius/export/users        # users ржлрж╛ржЗрж▓ ржлрж░рзНржорзНржпрж╛ржЯрзЗ
GET /api/freeradius/export/clients      # clients.conf ржлрж░рзНржорзНржпрж╛ржЯрзЗ
```

### ржЯрзЗрж╕рзНржЯрж┐ржВ ржПржмржВ рж▓ржЧрж┐ржВ
```
POST /api/freeradius/test-auth          # ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржЯрзЗрж╕рзНржЯ
GET  /api/freeradius/accounting-logs    # ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрж┐ржВ рж▓ржЧ
```

---

## ЁЯФР ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп | ржмрж░рзНржгржирж╛ |
|----------|--------|
| **Shared Secret** | ржЧрзНрж░рж╛рж╣ржХ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржЧрзЛржкржи ржпрзЛржЧрж╛ржпрзЛржЧ |
| **MD5 Encoding** | ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб RADIUS ржкрзНрж░рзЛржЯрзЛржХрж▓ ржжрзНржмрж╛рж░рж╛ ржПржиржХрзЛржб ржХрж░рж╛ рж╣ржпрж╝ |
| **NAS IP Whitelist** | рж╢рзБржзрзБржорж╛рждрзНрж░ ржмрж┐рж╢рзНржмрж╕рзНржд NAS ржерзЗржХрзЗ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржЧрзНрж░рж╣ржг ржХрж░рзБржи |
| **Request Authenticator** | ржкрзНрж░рждрж┐ржЯрж┐ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ рж╕рждрзНржпрждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣ржпрж╝ |
| **Audit Logging** | рж╕ржорж╕рзНржд ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржЪрзЗрж╖рзНржЯрж╛ рж▓ржЧ ржХрж░рж╛ рж╣ржпрж╝ |
| **Session Timeout** | ржирж┐рж╖рзНржХрзНрж░рж┐ржпрж╝ рж╕рзЗрж╢ржи рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржмржирзНржз рж╣ржпрж╝ |

---

## ЁЯУК рж╕рж┐рж╕рзНржЯрзЗржо ржлрзНрж▓рзЛ

```
ржкрзНрж░рж╛рж░ржорзНржнрж┐ржХ рж╕ржВржпрзЛржЧ:
  ржЗржЙржЬрж╛рж░ (WiFi/PPP) 
    тЖТ RouterOS (NAS)
      тЖТ FreeRADIUS рж╕рж╛рж░рзНржнрж╛рж░
        тЖТ Laravel ржбрж╛ржЯрж╛ржмрзЗрж╕
          тЖТ ржЗржЙржЬрж╛рж░ ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи
            тЖТ RADIUS рж╕рж╛ржлрж▓рзНржп/ржмрзНржпрж░рзНржерждрж╛
              тЖТ RouterOS рж╕рзЗрж╢ржи рж╕ржорж░рзНржержи
                тЖТ ржмрзНржпрж╛ржирзНржбржЙржЗрже ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ

ржЪрж▓ржорж╛ржи рж╕рзЗрж╢ржи:
  RouterOS
    тЖТ Accounting Data (ржкрзНрж░рждрж┐ 5 ржорж┐ржирж┐ржЯрзЗ)
      тЖТ FreeRADIUS рж╕рж╛рж░рзНржнрж╛рж░
        тЖТ Laravel ржбрж╛ржЯрж╛ржмрзЗрж╕
          тЖТ ржмрзНржпрж╛ржирзНржбржЙржЗрже ржЖржкржбрзЗржЯ
            тЖТ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо
```

---

## ЁЯЫая╕П ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рж╕ржорзНржкрзВрж░рзНржг

- тЬЕ FreeRADIUS рж╕рж╛рж░рзНржнрж╛рж░ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи
- тЬЕ RouterOS / MikroTik рж╕ржорж░рзНржержи
- тЬЕ WiFi Access Point рж╕ржорж░рзНржержи (Ubiquiti, Cisco, etc.)
- тЬЕ ржмрзНржпрж╛ржирзНржбржЙржЗрже ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрж┐ржВ
- тЬЕ рж╕рзЗрж╢ржи ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- тЬЕ ржЗржЙржЬрж╛рж░ ржЧрзНрж░рзБржк ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
- тЬЕ ржХржиржлрж┐ржЧ ржнрж╛рж░рзНрж╕ржи ржирж┐ржпрж╝ржирзНрждрзНрж░ржг
- тЬЕ рж╣рзЗрж▓рже ржоржирж┐ржЯрж░рж┐ржВ
- тЬЕ рж╕ржорзНржкрзВрж░рзНржг ржЕржбрж┐ржЯ рж▓ржЧрж┐ржВ
- тЬЕ API ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржлрж╛ржВрж╢ржи
- тЬЕ ржбрзЗржЯрж╛ржмрзЗрж╕ ржмрзНржпрж╛ржХржЖржк ржкрзНрж░рж╕рзНрждрзБржд

---

## ЁЯУИ ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржк

1. **FreeRADIUS рж╕рж╛рж░рзНржнрж╛рж░ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи** (Windows/Linux)
2. **ржорж╛ржЗржЧрзНрж░рзЗрж╢ржи ржЪрж╛рж▓рж╛ржи** (`php artisan migrate`)
3. **рж╕рж┐ржбрж╛рж░ ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ ржХрж░рзБржи** (`php artisan db:seed`)
4. **RouterOS ржХржиржлрж┐ржЧ ржХрж░рзБржи** (RADIUS рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЛржЧ ржХрж░рзБржи)
5. **ржЯрзЗрж╕рзНржЯрж┐ржВ ржХрж░рзБржи** (radtest ржжрж┐ржпрж╝рзЗ)
6. **ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ рж╕рзНржерж╛ржкржи ржХрж░рзБржи**

---

## ЁЯУЮ рж╕рж╣рж╛ржпрж╝рждрж╛

рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ:
1. `FREERADIUS_INTEGRATION_GUIDE.md` ржПрж░ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржмрж┐ржнрж╛ржЧ ржжрзЗржЦрзБржи
2. FreeRADIUS рж▓ржЧ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи: `/var/log/freeradius/radius.log`
3. API рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рзБржи: `GET /api/freeradius/diagnostics`
4. ржбрж╛ржЯрж╛ржмрзЗрж╕ ржнрзЗрж░рж┐ржлрж╛ржЗ ржХрж░рзБржи: `SELECT * FROM nas_clients;`

---

## ЁЯОЙ рж╕ржорж╛ржкрзНржд!

ржЖржкржирж╛рж░ ISP ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо ржПржЦржи **FreeRADIUS** ржПрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрзВрж░рзНржгржнрж╛ржмрзЗ ржПржХрзАржнрзВржд!

- **RADIUS ржкрзНрж░рзЛржЯрзЛржХрж▓**: RFC 2865 рж╕ржорзНржоржд
- **ржбрж╛ржЯрж╛ржмрзЗрж╕**: SQLite ржП рж╕ржорзНржкрзВрж░рзНржг ржЗрждрж┐рж╣рж╛рж╕
- **API**: 13+ ржПржирзНржбржкржпрж╝рзЗржирзНржЯ рж╕ржорзНржкрзВрж░рзНржг ржЕржкрж╛рж░рзЗрж╢ржирж╛рж▓
- **ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи**: 4ржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг ржЧрж╛ржЗржб

ржПржЦржи ржЖржкржирж┐ рж▓рж╛ржЗржн RADIUS ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи рж╕рзЗржЯржЖржк ржХрж░рждрзЗ ржкрж╛рж░рзЗржи! ЁЯЪА
